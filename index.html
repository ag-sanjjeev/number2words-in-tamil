<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Number 2 Text</title>

	<!-- Styles -->
	<link rel="stylesheet" type="text/css" href="./thirdparty/bootstrap/bootstrap.css" media="all" />
	<link rel="stylesheet" type="text/css" href="./thirdparty/icons/fontawesome/css/all.css" media="all" />
</head>
<body>

	<section class="main container-fluid">
		
		<div class="row d-flex justify-content-center align-items-center vh-100">
			
			<div class="col-md-6 col-lg-4">
				
				<!-- Form -->
				<form action="#" method="post" onsubmit="return convertNum2Txt(this);" class="card px-0 py-0 rounded shadow">
					
					<div class="card-body px-4 py-3">
						<div class="form-group mb-3">
							<label for="number" class="form-label mb-3">Number Input</label>
							<input type="text" name="number" id="number" class="form-control mb-3" placeholder="Enter the number" value="123000000.00" autofocus required />
						</div>

						<div class="form-group mb-3">
							<input type="checkbox" name="currencyFormat" id="currencyFormat" class="form-check-input" value="true" checked />
							<label for="currencyFormat" class="form-check-label">Currency Format</label>
						</div>

						<div class="form-group">
							<button type="submit" class="btn btn-success w-100">Convert</button>
						</div>
					</div>
										

					<div class="card-footer px-4">
						<p class="small">Text Output</p>
						<p class="lead text-start pill badge bg-primary text-wrap text-break lh-base" id="resultText"></p>
					</div>

				</form>

			</div>

		</div>

	</section>

	<!-- Scripts -->
	<script type="text/javascript" src="./thirdparty/scripts/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="./thirdparty/bootstrap/bootstrap.bundle.js"></script>

	<!-- Custom Script -->

	<!-- Global Constants -->
	<script type="text/javascript">
		const __numbers = [
		    "ஒன்று",
		    "இரண்டு",
		    "மூன்று",
		    "நான்கு",
		    "ஐந்து",
		    "ஆறு",
		    "ஏழு",
		    "எட்டு",
		    "ஒன்பது",
		    "பத்து",
		    "பதிணொன்று",
		    "பன்னிரண்டு",
		    "பதிமூன்று",
		    "பதிநான்கு",
		    "பதினைந்து",
		    "பதினாறு",
		    "பதினேழு",
		    "பதினெட்டு",
		    "பத்தொன்பது",
		    "இருபது",
		    "இருபத்தி ஒன்று",
		    "இருபத்தி இரண்டு",
		    "இருபத்தி மூன்று",
		    "இருபத்தி நான்கு",
		    "இருபத்தி ஐந்து",
		    "இருபத்தி ஆறு",
		    "இருபத்தி ஏழு",
		    "இருபத்தி எட்டு",
		    "இருபத்தி ஒன்பது",
		    "முப்பது",
		    "முப்பத்தி ஒன்று",
		    "முப்பத்தி இரண்டு",
		    "முப்பத்தி மூன்று",
		    "முப்பத்தி நான்கு",
		    "முப்பத்தி ஐந்து",
		    "முப்பத்தி ஆறு",
		    "முப்பத்தி ஏழு",
		    "முப்பத்தி எட்டு",
		    "முப்பத்தி ஒன்பது",
		    "நாற்பது",
		    "நாற்பத்தி ஒன்று",
		    "நாற்பத்தி இரண்டு",
		    "நாற்பத்தி மூன்று",
		    "நாற்பத்தி நான்கு",
		    "நாற்பத்தி ஐந்து",
		    "நாற்பத்தி ஆறு",
		    "நாற்பத்தி ஏழு",
		    "நாற்பத்தி எட்டு",
		    "நாற்பத்தி ஒன்பது",
		    "ஐம்பது",
		    "ஐம்பத்தி ஒன்று",
		    "ஐம்பத்தி இரண்டு",
		    "ஐம்பத்தி மூன்று",
		    "ஐம்பத்தி நான்கு",
		    "ஐம்பத்தி ஐந்து",
		    "ஐம்பத்தி ஆறு",
		    "ஐம்பத்தி ஏழு",
		    "ஐம்பத்தி எட்டு",
		    "ஐம்பத்தி ஒன்பது",
		    "அறுபது",
		    "அறுபத்து ஒன்று",
		    "அறுபத்து இரண்டு",
		    "அறுபத்து மூன்று",
		    "அறுபத்து நான்கு",
		    "அறுபத்து ஐந்து",
		    "அறுபத்து ஆறு",
		    "அறுபத்து ஏழு",
		    "அறுபத்து எட்டு",
		    "அறுபத்து ஒன்பது",
		    "எழுபது",
		    "எழுபத்து ஒன்று",
		    "எழுபத்து இரண்டு",
		    "எழுபத்து மூன்று",
		    "எழுபத்து நான்கு",
		    "எழுபத்து ஐந்து",
		    "எழுபத்து ஆறு",
		    "எழுபத்து ஏழு",
		    "எழுபத்து எட்டு",
		    "எழுபத்து ஒன்பது",
		    "எண்பது",
		    "எண்பத்து ஒன்று",
		    "எண்பத்து இரண்டு",
		    "எண்பத்து மூன்று",
		    "எண்பத்து நான்கு",
		    "எண்பத்து ஐந்து",
		    "எண்பத்து ஆறு",
		    "எண்பத்து ஏழு",
		    "எண்பத்து எட்டு",
		    "எண்பத்து ஒன்பது",
		    "தொன்னூறு",
		    "தொன்னூற்று ஒன்று",
		    "தொன்னூற்று இரண்டு",
		    "தொன்னூற்று மூன்று",
		    "தொன்னூற்று நான்கு",
		    "தொன்னூற்று ஐந்து",
		    "தொன்னூற்று ஆறு",
		    "தொன்னூற்று ஏழு",
		    "தொன்னூற்று எட்டு",
		    "தொன்னூற்று ஒன்பது",
		    "நூறு"
		];

		const __hundreds = ["நூறு", "இருநூறு", "முன்னூறு", "நானூறு", "ஐந்நூறு", "அறுநூறு", "எழுநூறு", "எண்ணூறு", "தொள்ளாயிரம்", "ஆயிரம்"];

		const __hundreds_continous = ["நூற்று", "இருநூற்று", "முன்னூற்று", "நானூற்று", "ஐந்நூற்று", "அறுநூற்று", "எழுநூற்று", "எண்ணூற்று", "தொள்ளாயிரத்து", "ஆயிரத்தி"];

		const __placesValue = ["ஆயிரம்", "லட்சம்", "கோடி"];

		const __placesValue_continous = ["ஆயிரத்து", "லட்சத்து", "கோடியே"];
	</script>

	<script type="text/javascript">

		function convertNum2Txt(form) {
			event.preventDefault();
			event.stopImmediatePropagation();

			var number = form.number.value;
			var numberText = '';
			var resultContainer = document.getElementById('resultText');

			var isCurrency = document.getElementById('currencyFormat').checked;
			let rupeeSign = '';


			if (!isValid(number)) {
				alert('Please enter valid number');
				return false;
			} else if (!isInLimit(number)) {
				alert('Please enter number range upto 9,99,99,99,99,99,999');
				return false;
			}

			var formattedNumber = formatNumber(number);

			var [integerPart, decimalPart] = formattedNumber.split('.');
			var splitIntNumber = integerPart.split(',');

			var lakhIntNumber = splitIntNumber.reverse().slice(0, 3);
			var croreIntNumber = splitIntNumber.slice(3, splitIntNumber.length);

			croreIntNumber = croreIntNumber.reverse().join('');

			var croreFormattedNumber = formatNumber(croreIntNumber);

			croreIntNumber = croreFormattedNumber.split(',');
			lakhIntNumber = lakhIntNumber.reverse();

			croreIntNumber.forEach(function(i, j) {				

				let placeIndex = croreIntNumber.length - (j+1);
				let hasAnyVoid = true;				
				let nextIndex = j+1;
				let textValue = '';
						
				let nonZeroInt = lakhIntNumber;
				
				nonZeroInt = nonZeroInt.filter(function(x) { return parseInt(x) });
				if (nonZeroInt.length > 0) {
					hasAnyVoid = false;
				} else {
					hasAnyVoid = true;
				}

				
				nonZeroInt = croreIntNumber.slice(j+1, croreIntNumber.length);
				nonZeroInt = nonZeroInt.filter(function(x) { return parseInt(x) });
				if (nonZeroInt.length > 0) {
					hasAnyVoid = false;
				} else {
					hasAnyVoid = true;
				}

				textValue = textForNumber(i, placeIndex, hasAnyVoid);
				numberText += (textValue === false) ? '' : textValue + ' ';
			});			

			if (numberText.trim() != '') {
				if (parseInt(lakhIntNumber[0]) == 0) {
					numberText += __placesValue[2] + ' ';
				} else {
					numberText += __placesValue_continous[2] + ' ';
				}
			}
			
			lakhIntNumber.forEach(function(i, j) {				

				let placeIndex = lakhIntNumber.length - (j+1);
				let hasAnyVoid = true;				
				let nextIndex = j+1;
				let textValue = '';
								
				if (parseInt(lakhIntNumber[lakhIntNumber.length - 1]) == 0) {
					hasAnyVoid = true;
				} else {
					hasAnyVoid = false;
				}

				let nonZeroInt = lakhIntNumber.slice(j+1, lakhIntNumber.length);
				
				nonZeroInt = nonZeroInt.filter(function(x) { return parseInt(x) });
				if (nonZeroInt.length > 0) {
					hasAnyVoid = false;
				} else {
					hasAnyVoid = true;
				}

				textValue = textForNumber(i, placeIndex, hasAnyVoid);
				numberText += (textValue === false) ? '' : textValue + ' ';
			});	

			numberText = numberText.trim();

			if (isCurrency) {
				rupeeSign = '<i class="fa fa-rupee-sign pe-2"></i>';
			}

			resultContainer.innerHTML = rupeeSign + numberText;
			// return false;
			return numberText;
		}

		function isValid(number) {
			if (number == 'undefined' || number == undefined || number == 'null' || number == null || number < 0 || number == '' || isNaN(number)) {
				return false;
			} 

			return true;
		}

		function isInLimit(number) {
			if (parseInt(number) <= 99999999999999) {
				return true;
			} 

			return false;
		}

		function formatNumber(number) {
			var intl = new Intl.NumberFormat('en-IN');
			var formattedNumber = intl.format(number, { minimumFractionDigit: 2 });
			return formattedNumber;
		}

		function textForNumber(number, place, hasAnyVoid = true) {
			var number = parseInt(number);
			let text = '';
			let i = 0;
			if (!isValid(number)) {
				//text = __numbers[number];
				console.warn('Invalid number', number);
				return false;
			}			

			if (place == 0) {
				if (number % 100 === 0) { 					
					i = Math.floor(number/100) - 1; 
					text = __hundreds[i];					 
				} else { 					
					i = Math.floor(number/100) - 1; 
					text = __hundreds_continous[i]; 
					
					if (text == 'undefined' || text == undefined || text == 'null' || text == null) {
						text = '';
					} else {
						text += ' ';
					}

					i = parseInt(number%100) - 1; 
					text += __numbers[i];
				} 
			} else if (place == 1) {
				i = parseInt(number%100) - 1; 
				text = __numbers[i]; 
			} else if (place == 2) {
				i = parseInt(number%100) - 1; 
				text = __numbers[i]; 
			} else if (place > 2) {
				console.warn('Out of range');
				return false;				
			}

			// Place Text
			let placeIndex = place - 1;
			if (place == 0) {
				text += '';
			} else if (place > 0 && place < 4) {
				text += ' ';
				text += (hasAnyVoid) ? __placesValue[(placeIndex)] : __placesValue_continous[(placeIndex)];				
			} else {
				console.warn('Invalid range', place);
				return false;
			}

			return text;			
		}

	</script>
</body>
</html>